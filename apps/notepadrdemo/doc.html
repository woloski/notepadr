<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <style type="text/css">
            #editor {
                width: 100%;
                height: 600px;
            }
        </style>
        <script type="text/javascript" src="/channel/bcsocket.js"></script>
        <script type="text/javascript" src="/share/share.js"></script>
        <script type="text/javascript" src="/share/textarea.js"></script>
        <script type="text/javascript"> 
            window.onload = function() {

                var editor = document.getElementById('editor');
                editor.value = 'loading...';

                sharejs.open('{{docname}}', function(error, doc) {
                    if(error) {
                        console.error(error);
                        return;
                    }

                    editor.value = doc.snapshot;

                    doc.attach_textarea(editor);
                })
            }

        </script>
    </head>

    <body>
        <h1>{{docname}}</h1>
        <textarea id="editor"></textarea>
    </body>
</html>
